<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>ğŸ“¸ MathGuru AI</title>
    <link rel="stylesheet" href="/static/css/style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Comic+Neue&display=swap" rel="stylesheet">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

    <!-- ğŸ” Navigation Bar -->
    <nav style="background-color: #0077b6; padding: 15px; display: flex; justify-content: space-between; align-items: center;">
        <div style="font-size: 22px; font-weight: bold; color: white;">ğŸ¤– MathGuru AI Assistant</div>
        <div>
            <button onclick="window.location.href='/manual-page'" class="btn">âœï¸ Manual Ask</button>
            <button onclick="window.location.href='/chat'" class="btn">ğŸ’¬ Tutor Talk</button>
            <button onclick="window.location.href='/history'" class="btn">ğŸ“š History</button>
            <button onclick="window.location.href='/hints'" class="btn">ğŸ’¡ Hints</button>
            <button onclick="window.location.href='/feedback'" class="btn">ğŸ“ Feedback</button>
            <button onclick="window.location.href='/logout'" class="btn">ğŸšª Logout</button>
            <button onclick="toggleTheme()" class="btn secondary">ğŸŒ“ Toggle Theme</button>
        </div>
    </nav>

    <!-- ğŸ§  App Info -->
    <h1>ğŸ“¸ Ask Anything with Image or Text</h1>
    <p>Capture from camera or type anything. Our MathGuru AI will respond intelligently.</p>

    <!-- ğŸ¥ Camera Input -->
    <div class="camera-container">
        <video id="camera" width="320" height="240" autoplay></video><br>
        <button id="captureBtn" class="btn">ğŸ“· Capture from Camera</button>
        <canvas id="snapshot" width="320" height="240" style="display:none;"></canvas>
    </div>

    <hr>

    <!-- âœï¸ Manual Input -->
    <h3>âœï¸ Or type your question</h3>
    <input type="text" id="manualInput" placeholder="e.g., Solve Maths">
    <button id="manualBtn" class="btn">ğŸ§  Ask MathGuru</button>

    <hr>

    <!-- ğŸ“‹ Output Display -->
    <h3>ğŸ“ Extracted Input:</h3>
    <p><b>Input:</b> <span id="text">Waiting...</span></p>

    <h3>âœ… MathGuru Final Answer:</h3>
    <p><b>Answer:</b> <span id="result">--</span></p>

    <h3>ğŸ“˜ Full MathGuru Response:</h3>
    <pre id="steps" style="white-space: pre-wrap; background-color: #f9f9f9; padding: 12px; border-radius: 8px; font-family: 'Courier New'; text-align: left;">Waiting for MathGuru response...</pre>

    <!-- ğŸ”Š Audio Section -->
    <div style="margin-top: 20px;">
        <audio id="feedbackAudio" style="display:none;"></audio>

        <!-- English Audio from Server -->
        <button onclick="playEnglishAudio()" class="btn btn-success">ğŸ”Š Play English Answer</button>

        <!-- Hindi Audio from Browser -->
        <button onclick="playHindiAudio()" class="btn btn-warning">ğŸ—£ï¸ Speak Hindi (Browser)</button>
    </div>

    <!-- ğŸ“œ Scripts -->
    <script src="/static/js/main.js"></script>
    <script src="/static/js/hindi_audio.js"></script>

    <!-- MathJax for LaTeX -->
    <script>
        window.MathJax = {
            tex: { inlineMath: [['$', '$'], ['\\(', '\\)']] },
            svg: { fontCache: 'global' }
        };
    </script>
    <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js" async></script>

    <!-- Optional: English Audio Function -->
    <script>
        function playEnglishAudio() {
            const audio = document.getElementById('feedbackAudio');
            if (audio && audio.src) {
                audio.play().catch(err => console.error("Audio play error:", err));
            } else {
                alert("âŒ No English feedback audio available.");
            }
        }
    </script>

</body>
</html>
